<div class="ion-page" id="main-content">
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="end">
        |<ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title class="ion-text-center">Scan</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <div *ngIf="data && !loading">
      <div class="max-w-2xl overflow-hidden bg-white shadow sm:rounded-lg m-3">
        <div class="px-4 py-5 sm:px-6">
          <div class="relative h-[250px] sm:h-[350px]">
            <img
              src="http://localhost:8080/uploads/client/{{data.o_foto}}"
              alt=""
              class="absolute inset-0 h-full w-full object-contain"
            />
          </div>
        </div>
        <div class="px-4 py-5 sm:px-6">
          <h3 class="text-lg font-medium text-gray-900 text-center mb-5">
            {{data.o_namaVoucher}}
          </h3>

          <button
            (click)="klaim()"
            type="button"
            class="h-12 py-2 px-4 flex justify-center items-center bg-greeny hover:bg-greeny2 focus:ring-greeny focus:ring-offset-greeny2 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0-3-3m3 3 3-3M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"
              />
            </svg>
            Klaim voucher ini
          </button>
        </div>
        <div class="border-t border-gray-200">
          <dl>
            <div
              class="px-4 py-5 bg-gray-50 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">Deskripsi</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                {{data.o_deskripsi}}
              </dd>
            </div>
            <div
              class="px-4 py-5 bg-white sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">Dimiliki oleh</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                {{data.user}}
              </dd>
            </div>
            <div
              class="px-4 py-5 bg-gray-50 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">
                Berlaku sampai tanggal
              </dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                {{data.o_tanggalAkhir | date:'dd-MM-yyyy'}}
              </dd>
            </div>
          </dl>
        </div>
      </div>
    </div>

    <div
      *ngIf="loading"
      style="
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: white;
      "
    >
      <div style="text-align: center; color: grey">
        <ion-spinner color="tertiary" name="bubbles"></ion-spinner>
        <p style="text-align: center; margin-top: 3px">please wait</p>
      </div>
    </div>

    <div id="container" *ngIf="!data">
      <strong>Silahkan scan Voucher</strong>
      <p>Klik tombol <ion-icon name="scan"></ion-icon> di pojok kanan bawah</p>
    </div>

    <ion-fab slot="fixed" vertical="bottom" horizontal="end">
      <ion-fab-button (click)="scan()" [disabled]="!isSupported">
        <ion-icon name="scan"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </ion-content>
</div>
